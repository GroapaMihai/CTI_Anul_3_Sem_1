<!DOCTYPE html>
<!-- saved from url=(0042)http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00 -->
<html lang="en" dir="ltr" class="js desktop"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Laboratorul 0 - Recapitulare [CN Wiki]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2015-03-15T23:33:46+0200">
<meta name="keywords" content="lab,cn2,lab00">
<link rel="search" type="application/opensearchdescription+xml" href="http://elf.cs.pub.ro/cn/wiki/lib/exe/opensearch.php" title="CN Wiki">
<link rel="start" href="http://elf.cs.pub.ro/cn/wiki/">
<link rel="contents" href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="http://elf.cs.pub.ro/cn/wiki/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://elf.cs.pub.ro/cn/wiki/feed.php?mode=list&amp;ns=lab:cn2">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://elf.cs.pub.ro/cn/wiki/_export/xhtml/lab/cn2/lab00">
<link rel="canonical" href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00">
<link rel="stylesheet" type="text/css" href="./Laboratorul 0 - Recapitulare [CN Wiki]_files/css.php">
<script type="text/javascript">/*<![CDATA[*/var NS='lab:cn2';var JSINFO = {"id":"lab:cn2:lab00","namespace":"lab:cn2","isadmin":0,"isauth":0};
/*!]]>*/</script><style type="text/css"></style>
<script type="text/javascript" charset="utf-8" src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/js.php"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="http://elf.cs.pub.ro/cn/wiki/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="http://elf.cs.pub.ro/cn/wiki/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki    
	showSidebar 
	hasSidebar">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">

    
    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="http://elf.cs.pub.ro/cn/wiki/home" accesskey="h" title="Home"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/logo.png" width="1242" height="407" alt=""></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=login&amp;sectok=a0d82294bf60552297e67b1fca60d14b" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>
        
        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="http://elf.cs.pub.ro/cn/wiki/home" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input type="hidden" name="do" value="search"><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]"><input type="submit" value="Search" class="button" title="Search"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="http://elf.cs.pub.ro/cn/wiki/doku.php" method="get" accept-charset="utf-8"><div class="no"><input type="hidden" name="id" value="lab:cn2:lab00"><select name="do" class="edit quickselect" title="Tools"><option value="">Tools</option><optgroup label="Page Tools"><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input type="submit" value="&gt;" style="display: none;"></div></form>            </div>
            <ul>
                <li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=media&amp;ns=lab%3Acn2" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    
    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">

                            <!-- ********** ASIDE ********** -->
		<div id="dokuwiki__aside"><div class="pad include group">
                    <h3 class="toggle open" style="cursor: pointer; display: none;"><strong><span>−</span></strong>Sidebar</h3>
                    <div class="content" style="">
                                                                        
<p aria-expanded="true" style="">

</p><ul id="navbar" aria-expanded="true" style="">

<li>
<a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#">Laboratoare CN1</a>

<p></p>

<div><div id="nojs_indexmenu_15176734456d54cdeab3d0" data-jsajax="" class="indexmenu_nojs">

<ul class="idx" role="tree">
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab00" class="wikilink1" title="lab:cn1:lab00">Laboratorul 0 - Introducere in logica digitala. Falstad</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab01" class="wikilink1" title="lab:cn1:lab01">Laboratorul 1 - Introducere in Verilog</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab02_nou" class="wikilink1" title="lab:cn1:lab02_nou">Laboratorul 2 - Tipuri de descriere a modulelor in Verilog</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab03" class="wikilink1" title="lab:cn1:lab03">Laboratorul 3 - FPGA - laborator introductiv</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab04" class="wikilink1" title="lab:cn1:lab04">Laboratorul 4 - Automate cu stări simple</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab05" class="wikilink1" title="lab:cn1:lab05">Laboratorul 5 - FSM 2: afisajul cu 7 segmente</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab06" class="wikilink1" title="lab:cn1:lab06">Laboratorul 6 - FSM 3: UART</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab07" class="wikilink1" title="lab:cn1:lab07">Laboratorul 7 - Sumatoare</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab08" class="wikilink1" title="lab:cn1:lab08">Laboratorul 8 - Sumatorul Carry-Lookahead</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab09" class="wikilink1" title="lab:cn1:lab09">Laboratorul 9 - Unitatea aritmetică logică</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab10" class="wikilink1" title="lab:cn1:lab10">Laboratorul 10 - Tetris</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/labr" class="wikilink1" title="lab:cn1:labr">Laborator de recapitulare - Putting it all together: A simple processor</a></div></li>
</ul>
</div></div>

<p>

</p></li>


<li>
<a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#">Laboratoare CN2</a>

<p></p>

<div><div id="nojs_indexmenu_64635894056d54cdf01d37" data-jsajax="" class="indexmenu_nojs">

<ul class="idx" role="tree">
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00" class="wikilink1" title="lab:cn2:lab00">Laboratorul 0 - Recapitulare</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab01" class="wikilink1" title="lab:cn2:lab01">Laboratorul 1 - Memorii</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab02" class="wikilink1" title="lab:cn2:lab02">Laboratorul 2 - Instruction Set Architecture 1</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab03" class="wikilink1" title="lab:cn2:lab03">Laboratorul 3 - Instruction Set Architecture 2</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab04" class="wikilink1" title="lab:cn2:lab04">Laboratorul 4 - Instruction Set Architecture 3</a></div></li>
<li class="level1" role="treeitem"><div class="li"><span class="curid"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab05" class="wikilink1" title="lab:cn2:lab05">Laboratorul 5 - Instruction Set Architecture 4</a></span></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab06" class="wikilink1" title="lab:cn2:lab06">Laboratorul 6 - GPIO 1: Output</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab07" class="wikilink1" title="lab:cn2:lab07">Laboratorul 7 - GPIO 2: Input</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab08" class="wikilink1" title="lab:cn2:lab08">Laboratorul 8 - Recapitulare si completari</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab09" class="wikilink1" title="lab:cn2:lab09">Laboratorul 9 - Timer/Counter</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab10" class="wikilink1" title="lab:cn2:lab10">Laboratorul 10 - Intreruperi</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab11" class="wikilink1" title="lab:cn2:lab11">Laboratorul 11 - Recapitulare</a></div></li>
</ul>
</div></div>

<p>

</p></li>



<li>
<a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#">Tutoriale</a>

<p></p>

<div><div id="nojs_indexmenu_78829373456d54cdf865e4" data-jsajax="" class="indexmenu_nojs">

<ul class="idx" role="tree">
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/constraints-ise" class="wikilink1" title="tutoriale:constraints-ise">Asignarea pinilor de IO în Xilinx ISE</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/debug-ise" class="wikilink1" title="tutoriale:debug-ise">Debugging folosind Xilinx ISE</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/install-ise" class="wikilink1" title="tutoriale:install-ise">Instalarea Xilinx ISE WebPACK</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/programare-ise" class="wikilink1" title="tutoriale:programare-ise">Programarea FPGA-ului folosind Xilinx ISE</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/proiect-ise" class="wikilink1" title="tutoriale:proiect-ise">Crearea unui proiect în Xilinx ISE</a></div></li>
<li class="level1" role="treeitem"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/tutoriale/simulare-ise" class="wikilink1" title="tutoriale:simulare-ise">Simularea unui modul în Xilinx ISE</a></div></li>
</ul>
</div></div>

<p>

</p></li>


<li>
<a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#">Resurse</a>
<ul>
<li><a class="media mediafile mf_pdf" href="http://www.ece.uvic.ca/~fayez/courses/ceng465/vlogref.pdf"> Verilog Cheatsheet</a></li>
<li><a class="media mediafile mf_pdf" href="http://verilog.renerta.com/"> Verilog Language Reference</a></li>
<li><a class="media mediafile mf_pdf" href="http://www.digilentinc.com/Data/Products/NEXYS/Nexys_rm.pdf"> Digilent Nexys Board Manual</a></li>
</ul>
</li>

</ul>

<p aria-expanded="true" style=""></p>
                                            </div>
		</div></div><!-- /aside -->
            
	    <!-- BREADCRUMBS -->
	    		<div class="breadcrumbs">
		    			<div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://elf.cs.pub.ro/cn/wiki/home" class="wikilink1" title="home">Calculatoare Numerice</a></bdi></span> » <bdi><a href="http://elf.cs.pub.ro/cn/wiki/lab/home" class="wikilink2" title="lab:home" rel="nofollow">lab</a></bdi> » <bdi><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/home" class="wikilink2" title="lab:cn2:home" rel="nofollow">cn2</a></bdi> » <bdi><span class="curid"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00" class="wikilink1" title="lab:cn2:lab00">Laboratorul 0 - Recapitulare</a></span></bdi></div>
		    		    		</div>
	    
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="page group" style="min-height: 37px;">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle open" style="cursor: pointer;"><strong><span>−</span></strong>Table of Contents</h3>
<div>

<ul class="toc" aria-expanded="true" style="">
<li class="level1"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-instalarea-xilinx-ise">1. [0p] Instalarea Xilinx ISE</a></div></li>
<li class="level1"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-logica-combinationala-si-secventiala">2. [3p] Logica combinationala si secventiala</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-introducere">2.1. [0.25p] Introducere</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-state-register">2.2. [0.25p] State register</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-output-logic">2.3. [0.25p] Output logic</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-next-state-logic">2.4. [0.25p] Next-state logic</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-modul-de-simulare">2.5. [0.25p] Modul de simulare</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-generarea-ceasului">2.6. [0.25p] Generarea ceasului</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-testare">2.7. [0.5p] Testare</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-corectare">2.8. [0.5p] Corectare</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-corectarea-modulului-de-test">2.9. [0.5p] Corectarea modulului de test</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-automate-cu-stari-finite-fsm">3. [7p] Automate cu stari finite (FSM)</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-diagrama-de-stari-mealy">3.1. [3p] Diagrama de stari Mealy</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-implementare-fsm-mealy">3.2. [2p] Implementare FSM Mealy</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-verificarea-design-ului">3.3 [1p] Verificarea design-ului</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-studiul-schemei-rtl-generate">3.4. [0.5p] Studiul schemei RTL generate</a></div></li>
<li class="level2"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#p-implementarea-fsm-ului-moore">3.5. [0.5p] Implementarea FSM-ului Moore</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#rezolvari">4. Rezolvari</a></div></li>
<li class="level1"><div class="li"><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#link-uri-utile">5. Link-uri utile</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laboratorul-0-recapitulare">Laboratorul 0 - Recapitulare</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Responsabil: <a href="mailto:olteanv@gmail.com" class="mail" title="olteanv@gmail.com">Vladimir Oltean</a></div>
</li>
<li class="level0"><div class="li"> Data publicării: 4.10.2014</div>
</li>
<li class="level0"><div class="li"> Data ultimei modificări: 6.10.2014</div>
</li>
</ul>

<p>
<strong>Materiale necesare:</strong>
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://elf.cs.pub.ro/cn/wiki/aux/cn1/aux1" class="urlextern" title="https://elf.cs.pub.ro/cn/wiki/aux/cn1/aux1" rel="nofollow">Verilog crash course</a></div>
</li>
</ul>

</div>

<h1 class="sectionedit2" id="exercitii">Exercitii</h1>
<div class="level1">

</div>

<h2 class="sectionedit3" id="p-instalarea-xilinx-ise">1. [0p] Instalarea Xilinx ISE</h2>
<div class="level2">

<p>
</p><p></p><div class="noteclassic">
Calculatoarele din laborator au software-ul necesar preinstalat!<br>
</div><p></p>
<p></p>

<p>
In caz ca v-ati bucurat prea tare dupa CN1 si ati dezinstalat Xilinx ISE (sau daca nu l-ati instalat deloc), va trebui sa urmati <a href="https://elf.cs.pub.ro/cn/wiki/tutoriale/install-ise" class="urlextern" title="https://elf.cs.pub.ro/cn/wiki/tutoriale/install-ise" rel="nofollow">acest tutorial</a> pentru instalarea lui (recomandam ultima versiune, 14.7). Acesta ruleaza atat sub Windows, cat si sub sisteme Linux.
</p>

</div>

<h2 class="sectionedit4" id="p-logica-combinationala-si-secventiala">2. [3p] Logica combinationala si secventiala</h2>
<div class="level2">

<p>
Pentru a ne aminti diferenta dintre aceste doua concepte, va trebui sa implementam un <strong>shift register</strong> pe 8 biti. Acesta este un modul cu o intrare seriala (pe un bit) si o iesire seriala (tot pe un bit).<br>Din punct de vedere intrare-iesire, modulul va trebui sa repete la iesire ceea ce primeste la intrare, insa cu un decalaj de 8 cicli de ceas. Pentru a permite acest lucru, valorile primite in ultimii 8 cicli de ceas trebuie retinute, cumva, intr-un bloc de memorie (<strong>logica secventiala</strong>) implementata cu bistabili D.
</p>

</div>

<h3 class="sectionedit5" id="p-introducere">2.1. [0.25p] Introducere</h3>
<div class="level3">

<p>
Creati un nou proiect in Xilinx ISE (setarile default sunt bune), si in interiorul acestuia creati un modul Verilog numit ShiftRegister, cu urmatoarea interfata:
</p>
<pre class="code Verilog"><span class="kw1">module</span> ShiftRegister <span class="br0">(</span>
        <span class="kw1">input</span>  serial_in<span class="sy0">,</span>
        <span class="kw1">input</span>  clk<span class="sy0">,</span>
        <span class="kw1">input</span>  reset<span class="sy0">,</span>
        <span class="kw1">output</span> serial_out
    <span class="br0">)</span><span class="sy0">;</span>
<span class="kw1">endmodule</span></pre>

<p>
</p><p></p><div class="noteclassic">
Remarcati diferenta dintre declaratia interfetei unui modul si implementarea lui (in interfata de mai sus nu s-a specificat daca semnalele <code>serial_in</code>, <code>serial_out</code> etc sunt de tip <code>wire</code> sau <code>reg</code>. Acest lucru poate fi specificat ulterior in cadrul implementarii modulului (by default ele sunt wire).<br>
</div><p></p>
<p></p>

</div>

<h3 class="sectionedit6" id="p-state-register">2.2. [0.25p] State register</h3>
<div class="level3">

<p>
In interiorul modulului, declarati memoria de care aveti nevoie pentru a retine cei 8 biti de stare ai registrului de deplasare:<br>
</p>
<pre class="code Verilog"><span class="kw1">reg</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> state<span class="sy0">;</span></pre>

</div>

<h3 class="sectionedit7" id="p-output-logic">2.3. [0.25p] Output logic</h3>
<div class="level3">

<p>
Legati in mod combinational (folosind fie <code>assign</code>, fie <code>always @*</code>) iesirea <code>serial_out</code> la bitul MSB (cel cu indice 7) din registrul de stare.
</p>

</div>

<h3 class="sectionedit8" id="p-next-state-logic">2.4. [0.25p] Next-state logic</h3>
<div class="level3">

<p>
Acum va trebui sa determinati comportamentul registrului de stare la fiecare tranzitie pozitiva (sau negativa, depinde de implementare) a semnalului de ceas. Vom implementa un shift register in care bitii se deplaseaza, la fiecare ciclu de ceas, dinspre LSB spre MSB astfel:
</p>
<ul>
<li class="level1"><div class="li"> <code>state[7]</code> ← <code>state[6]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[6]</code> ← <code>state[5]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[5]</code> ← <code>state[4]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[4]</code> ← <code>state[3]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[3]</code> ← <code>state[2]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[2]</code> ← <code>state[1]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[1]</code> ← <code>state[0]</code></div>
</li>
<li class="level1"><div class="li"> <code>state[0]</code> ← <code>serial_in</code></div>
</li>
</ul>

<p>
Aceste tranzitii trebuie executate secvential, deci plasate intr-un bloc de tip <code>always @(posedge clk)</code>, si inconjurate de cuvintele-cheie <code>begin</code> si <code>end</code>. De asemenea, atribuirile trebuie sa fie nonblocante (<code>⇐</code>).
</p>

<p>
</p><p></p><div class="noteclassic">
Pentru o scriere mai compacta, limbajul Verilog permite gruparea mai multor manunchiuri de biti de ambele parti ale semnului de atribuire, atata timp cat dimensiunea manunchiurilor este egala. Spre exemplu, snippet-ul<br>
<p></p>
<pre class="code Verilog"><span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> a<span class="sy0">;</span>
<span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">4</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> b<span class="sy0">;</span>
&nbsp;
<span class="kw1">assign</span> b<span class="br0">[</span><span class="nu0">1</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">=</span> a<span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">2</span><span class="br0">]</span><span class="sy0">;</span></pre>

<p>
este corect, in timp ce urmatorul snippet nu este:<br>
</p>
<pre class="code Verilog"><span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> a<span class="sy0">;</span>
<span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> b<span class="sy0">;</span>
&nbsp;
<span class="kw1">assign</span> a<span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">=</span> b<span class="br0">[</span><span class="nu0">3</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">;</span></pre>

<p>

</p></div><p></p>
<p></p>

</div>

<h3 class="sectionedit9" id="p-modul-de-simulare">2.5. [0.25p] Modul de simulare</h3>
<div class="level3">

<p>
Creati un nou modul Verilog de tipul “test fixture” cu numele <code>testShiftRegister</code>. Acum, puteti comuta intre fisierul sursa si cel de test prin intermediul view-urilor <code>Implementation</code> si respectiv <code>Simulation</code> din ISE.
</p>

</div>

<h3 class="sectionedit10" id="p-generarea-ceasului">2.6. [0.25p] Generarea ceasului</h3>
<div class="level3">

<p>
In modulul de simulare aveti posibilitatea de a controla timing-ul instructiunilor voastre prin folosirea prefixului <code>#</code> urmat de un numar, exprimat in nanosecunde (sau in ce alta unitate este mentionata in timescale-ul de la inceputul fisierului.<br>Va trebui sa generam un semnal de ceas pentru modulul nostru testat (UUT = unit under test), care executa tranzitii crescatoare si descrescatoare.<br>Cel mai simplu mod de a face acest lucru este introducerea unui bloc precum urmatorul:<br>
</p>
<pre class="code Verilog"><span class="kw1">initial</span> <span class="kw1">forever</span>
    <span class="sy0">#</span><span class="nu0">5</span> clock <span class="sy0">=</span> <span class="sy0">~</span>clock<span class="sy0">;</span></pre>

<p>
Codul de mai sus genereaza un ceas cu perioada de 10 nanosecunde, sau frecventa de 100 <abbr title="Megahertz">MHz</abbr>.
</p>

</div>

<h3 class="sectionedit11" id="p-testare">2.7. [0.5p] Testare</h3>
<div class="level3">

<p>
In blocul <code>initial</code> al modulului de test introduceti date pe linia seriala (<code>serial_in</code>), spatiate intre ele prin instructiuni de delay (spre exemplu <code>#42;</code>). Observati comportamentul modulului si verificati comportamentul lui dand click pe <code>ISim Simulator</code> → <code>Simulate Behavioral Model</code>.
</p>

</div>

<h3 class="sectionedit12" id="p-corectare">2.8. [0.5p] Corectare</h3>
<div class="level3">

<p>
De ce este linia <code>serial_out</code> rosie la inceputul simularii? Rezolvati problema in cadrul implementarii modulului (<code>ShiftRegister.v</code>) prin introducerea unei logici de reset a modulului, care initializeaza starea modulului la una cunoscuta.
</p>

</div>

<h3 class="sectionedit13" id="p-corectarea-modulului-de-test">2.9. [0.5p] Corectarea modulului de test</h3>
<div class="level3">

<p>
Modificati modulul de test astfel incat sa aplice un impuls de reset modulului, timp de cel putin un ciclu de ceas. Verificati si validati functionarea corecta a modulului.
</p>

</div>

<h2 class="sectionedit14" id="p-automate-cu-stari-finite-fsm">3. [7p] Automate cu stari finite (FSM)</h2>
<div class="level2">

<p>
Pentru acest exercitiu dorim sa cream un modul care realizeaza functia de auto-capitalizare a unui text primit ca intrare. Spre exemplu, textul:
</p>
<pre class="code">ana are mere.   florin are un tanc
nu imi pasa.. ma uit pe www.sport.ro.</pre>

<p>
se va transforma in:
</p>
<pre class="code">Ana are mere.   Florin are un tanc
Nu imi pasa.. ma uit pe www.sport.ro.</pre>

<p>
Pentru a implementa in hardware functionalitatea propusa, vom avea nevoie de un modul secvential, cu input serial, pe 8 biti, codurile <abbr title="American Standard Code for Information Interchange">ASCII</abbr> ale literelor textului, in ordine. Output-ul modulului va fi codul <abbr title="American Standard Code for Information Interchange">ASCII</abbr>, pe 8 biti, al literei curente, corectate.
</p>

<p>
</p><p></p><div class="noteimportant">
<strong>Mealy vs Moore:</strong> Asa cum va amintiti <a href="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab03" class="urlextern" title="http://elf.cs.pub.ro/cn/wiki/lab/cn1/lab03" rel="nofollow">de la CN1</a>, aceste doua design-uri de FSM difera in urmatoarele puncte:
<p></p>
<ul>
<li class="level1"><div class="li"> <strong>Moore</strong> reprezinta un FSM cu logica minimala de output, fiindca acesta depinde doar de starea curenta. Ca avantaj, este mai simplu de proiectat, dar ca dezavantaj, nu putem grupa impreuna mai multe stari care au comportament foarte asemanator, asa ca uneori va rezulta un design cu mai multe stari decat echivalentul sau Mealy.</div>
</li>
<li class="level1"><div class="li"> <strong>Mealy</strong> reprezinta un design de FSM in care output-ului ii este permis sa depinda nu doar de stare, ci si de input-ul curent. Astfel, putem condensa impreuna starile care trebuie sa aiba comportament similar (al caror output depinde in mod predictibil de input). Ca dezavantaj, logica de output va fi putin mai complexa decat la Moore, dar vom avea (potential) mai putine stari. Ca un mic avantaj suplimentar, FSM-ul va raspunde acum la output in acelasi ciclu de ceas in care a primit si input-ul, fiindca depinde in mod direct si de acesta. Prin comparatie, un automat Moore ar trebui sa execute cel putin inca o tranzitie (deci inca un ciclu de ceas) pana sa treaca in starea noua, deci output-ul sa devina vizibil.</div>
</li>
</ul>

<p>

</p></div><p></p>
<p></p>

</div>

<h3 class="sectionedit15" id="p-diagrama-de-stari-mealy">3.1. [3p] Diagrama de stari Mealy</h3>
<div class="level3">

<p>
Realizati diagrama de stari a FSM-ului propus mai sus, luand in considerare urmatoarele:
</p>
<ul>
<li class="level1"><div class="li"> prima litera a textului trebuie auto-capitalizata</div>
</li>
<li class="level1"><div class="li"> un inceput de fraza este considerat dupa newline, sau dupa punct si cel putin un spatiu, dar NU dupa mai multe puncte, sau dupa punct fara spatiu.</div>
</li>
<li class="level1"><div class="li"> capitalizarea literelor trebuie aplicata doar in cazul in care litera de la intrare este alfabetica si mica ('a' - 'z'). Altfel, litera de la intrare trebuie reprodusa la iesire.</div>
</li>
</ul>

</div>

<h3 class="sectionedit16" id="p-implementare-fsm-mealy">3.2. [2p] Implementare FSM Mealy</h3>
<div class="level3">

<p>
Pornind de la numarul de stari ale diagramei de mai sus, determinati numarul minim de biti necesari pentru stocarea starii interne. Implementati, apoi, FSM-ul. Puteti pleca de la scheletul de cod de mai jos:<br>
</p>
<pre class="code Verilog"><span class="kw1">module</span> Autocapitalize <span class="br0">(</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_in<span class="sy0">,</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span>       clock<span class="sy0">,</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span>       reset<span class="sy0">,</span>
        <span class="kw1">output</span> <span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_out
    <span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    localparam N <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span>
               STATE_A <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span>
               STATE_B <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span>
               STATE_C <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">reg</span> <span class="br0">[</span>N<span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> state<span class="sy0">;</span>
    <span class="kw1">reg</span> <span class="br0">[</span>N<span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> next_state<span class="sy0">;</span>
&nbsp;
    <span class="coMULTI">/* State register */</span>
    <span class="kw1">always</span> <span class="sy0">@</span><span class="br0">(</span><span class="kw1">posedge</span> clock<span class="br0">)</span>
        <span class="kw1">if</span> <span class="br0">(</span>reset<span class="br0">)</span>
            state <span class="sy0">&lt;=</span> STATE_A<span class="sy0">;</span>
        <span class="kw1">else</span>
            state <span class="sy0">&lt;=</span> next_state<span class="sy0">;</span>
&nbsp;
    <span class="coMULTI">/* Next-state logic */</span>
    <span class="kw1">always</span> <span class="sy0">@*</span>
        <span class="coMULTI">/* puteti face "case" atat dupa ascii_in, cat si dupa state,
           depinde de modul cum ati construit diagrama si cum va este
           mai convenabil */</span>
        <span class="kw1">case</span> <span class="br0">(</span>ascii_in<span class="br0">)</span>
        <span class="st0">"."</span><span class="sy0">:</span> <span class="kw1">begin</span>
        <span class="kw1">end</span>
        <span class="st0">" "</span><span class="sy0">:</span> <span class="kw1">begin</span>
        <span class="kw1">end</span>
        <span class="st0">"<span class="es0">\n</span>"</span><span class="sy0">:</span> <span class="kw1">begin</span>
        <span class="kw1">end</span>
        <span class="kw1">endcase</span>
&nbsp;
    <span class="coMULTI">/* Output logic */</span>
    <span class="kw1">assign</span> ascii_out <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw1">endmodule</span></pre>

</div>

<h3 class="sectionedit17" id="p-verificarea-design-ului">3.3 [1p] Verificarea design-ului</h3>
<div class="level3">

<p>
Pentru verificare puteti folosi urmatorul modul de test:<br>
</p>
<dl class="code">
<dt><a href="http://elf.cs.pub.ro/cn/wiki/_export/code/lab/cn2/lab00?codeblock=6" title="Download Snippet" class="mediafile mf_v">testAutocapitalize.v</a></dt>
<dd><pre class="code Verilog"><span class="kw3">`timescale</span> <span class="re1">1ns</span> <span class="sy0">/</span> <span class="re1">1ps</span>
&nbsp;
<span class="kw1">module</span> testAutocapitalize<span class="sy0">;</span>
&nbsp;
	<span class="co1">// Inputs</span>
	<span class="kw1">reg</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_in<span class="sy0">;</span>
	<span class="kw1">reg</span> clock<span class="sy0">;</span>
	<span class="kw1">reg</span> reset<span class="sy0">;</span>
&nbsp;
	<span class="co1">// Outputs</span>
	<span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_out<span class="sy0">;</span>
<span class="kw3">`ifdef</span> DEBUG
	<span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">1</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> currentState<span class="sy0">;</span>
<span class="kw3">`endif</span>
&nbsp;
&nbsp;
	<span class="co1">// Instantiate the Unit Under Test (UUT)</span>
	Autocapitalize uut <span class="br0">(</span>
<span class="kw3">`ifdef</span> DEBUG
		.currentState<span class="br0">(</span>currentState<span class="br0">)</span><span class="sy0">,</span>
<span class="kw3">`endif</span>
		.ascii_in<span class="br0">(</span>ascii_in<span class="br0">)</span><span class="sy0">,</span> 
		.clock<span class="br0">(</span>clock<span class="br0">)</span><span class="sy0">,</span> 
		.reset<span class="br0">(</span>reset<span class="br0">)</span><span class="sy0">,</span> 
		.ascii_out<span class="br0">(</span>ascii_out<span class="br0">)</span>
	<span class="br0">)</span><span class="sy0">;</span>
&nbsp;
	<span class="kw1">initial</span> <span class="kw1">forever</span>
		<span class="sy0">#</span><span class="nu0">5</span> clock <span class="sy0">=</span> <span class="sy0">~</span>clock<span class="sy0">;</span>
&nbsp;
	<span class="kw1">initial</span> <span class="kw1">begin</span>
		<span class="co1">// Initialize Inputs</span>
		ascii_in <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		clock <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		reset <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
&nbsp;
		<span class="co1">// Wait 10 ns for global reset to finish</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"f"</span><span class="sy0">;</span>
		reset <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
		<span class="co1">// Add stimulus here</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"O"</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"."</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"."</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">" "</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"a"</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"<span class="es0">\n</span>"</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"c"</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"."</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">" "</span><span class="sy0">;</span>
		<span class="sy0">#</span><span class="nu0">10</span> ascii_in <span class="sy0">=</span> <span class="st0">"p"</span><span class="sy0">;</span>
	<span class="kw1">end</span>
&nbsp;
<span class="kw1">endmodule</span></pre>
</dd></dl>

</div>

<h3 class="sectionedit18" id="p-studiul-schemei-rtl-generate">3.4. [0.5p] Studiul schemei RTL generate</h3>
<div class="level3">

<p>
Dupa ce va asigurati ca aveti un modul <code>Autocapitalize.v</code> functional, intorcandu-va in modul <code>Implementation</code>, dati dublu click pe <code>Synthesize - XST</code> → <code>View RTL Schematic</code>, apoi selectati “Start with a schematic of the top-level block.<br>Pe ecran va aparea modulul vostru, descris intrare-iesire (“black box”). Dand dublu click pe el, acesta va fi detaliat in partile sale componente. Unele din acestea vor fi, de asemenea, module descrise intrare-iesire, si pot fi si ele expandate prin dublu click.<br>Dupa ce ati expandat toate modulele, recunoasteti elementele componente ale FSM-ului in schema RTL generata.
</p>

</div>

<h3 class="sectionedit19" id="p-implementarea-fsm-ului-moore">3.5. [0.5p] Implementarea FSM-ului Moore</h3>
<div class="level3">

<p>
Daca am vrea sa implementam FSM-ul in aceasta varianta, nu am putea grupa toate literele care trebuie capitalizate in aceeasi stare, fiindca output-ul nu poate depinde de input. Asadar, ar trebui creata o stare pentru fiecare din cele 256 de caractere <abbr title="American Standard Code for Information Interchange">ASCII</abbr>, in care output-ul corespunde literei respective, daca ea nu este alfabetica si mica ('a' - 'z'), sau echivalentului ei uppercase ('A' - 'Z') altfel.<br>Realizati o diagrama de stari de principiu pentru FSM in varianta Moore.
</p>

</div>

<h2 class="sectionedit20" id="rezolvari">4. Rezolvari</h2>
<div class="level2">

<p>
<strong>3.</strong> Problema poate fi gandita in felul urmator:<br>Stari:<br>0 - <strong>DONT</strong> - don't capitalize this<br>1 - <strong>CAP</strong> - capitalize this<br>2 - <strong>DOT</strong> - am intalnit un punct<br>3 - <strong>NEVER</strong> - am intalnit mai multe puncte
</p>

<p>
Din starea <strong>DONT</strong> trec in:
</p>
<ul>
<li class="level1"><div class="li"> <strong>DOT</strong> daca am primit un punct</div>
</li>
<li class="level1"><div class="li"> <strong>CAP</strong> daca am primit un “\n”</div>
</li>
<li class="level1"><div class="li"> <strong>DONT</strong> daca am primit orice altceva</div>
</li>
</ul>

<p>
Din starea <strong>CAP</strong> trec in:
</p>
<ul>
<li class="level1"><div class="li"> <strong>DOT</strong> daca am primit un punct</div>
</li>
<li class="level1"><div class="li"> <strong>CAP</strong> daca am primit un “\n”</div>
</li>
<li class="level1"><div class="li"> <strong>DONT</strong> daca am primit orice altceva</div>
</li>
</ul>

<p>
Din starea <strong>DOT</strong> trec in:
</p>
<ul>
<li class="level1"><div class="li"> <strong>NEVER</strong> daca am primit un punct</div>
</li>
<li class="level1"><div class="li"> <strong>CAP</strong> daca am primit un ” ” sau un “\n”</div>
</li>
<li class="level1"><div class="li"> <strong>DONT</strong> daca am primit orice altceva</div>
</li>
</ul>

<p>
Din starea <strong>NEVER</strong> trec in:
</p>
<ul>
<li class="level1"><div class="li"> <strong>NEVER</strong> pe input ”.”</div>
</li>
<li class="level1"><div class="li"> <strong>CAP</strong> pe input “\n”</div>
</li>
<li class="level1"><div class="li"> <strong>DONT</strong> pe orice altceva</div>
</li>
</ul>

<p>
Deci, pe scurt, cred ca Mealy-ul s-ar putea rezuma asa:<br><a href="http://elf.cs.pub.ro/cn/wiki/_detail/lab/cn2/index.png?id=lab%3Acn2%3Alab00" class="media" title="lab:cn2:index.png"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/index.png" class="media" title="Mealy" alt="Mealy"></a>.
</p>
<pre class="code Verilog"><span class="kw1">module</span> Autocapitalize <span class="br0">(</span>
<span class="kw3">`ifdef</span> DEBUG
        <span class="kw1">output</span>      <span class="br0">[</span><span class="nu0">1</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> currentState<span class="sy0">,</span>
<span class="kw3">`endif</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_in<span class="sy0">,</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span>       clock<span class="sy0">,</span>
        <span class="kw1">input</span>  <span class="kw1">wire</span>       reset<span class="sy0">,</span>
        <span class="kw1">output</span> <span class="kw1">wire</span> <span class="br0">[</span><span class="nu0">7</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> ascii_out
    <span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    localparam STATE_CAP   <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span>
               STATE_DOT   <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">,</span>
               STATE_DONT  <span class="sy0">=</span> <span class="nu0">2</span><span class="sy0">,</span>
               STATE_NEVER <span class="sy0">=</span> <span class="nu0">3</span><span class="sy0">;</span>
    localparam toUpper <span class="sy0">=</span> <span class="st0">"A"</span> <span class="sy0">-</span> <span class="st0">"a"</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">reg</span> <span class="br0">[</span><span class="nu0">1</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> currentState<span class="sy0">;</span>
    <span class="kw1">reg</span> <span class="br0">[</span><span class="nu0">1</span><span class="sy0">:</span><span class="nu0">0</span><span class="br0">]</span> nextState<span class="sy0">;</span>
&nbsp;
    <span class="coMULTI">/* State register */</span>
    <span class="kw1">always</span> <span class="sy0">@</span><span class="br0">(</span><span class="kw1">posedge</span> clock<span class="br0">)</span>
        <span class="kw1">if</span> <span class="br0">(</span>reset<span class="br0">)</span>
            currentState <span class="sy0">&lt;=</span> STATE_CAP<span class="sy0">;</span>
        <span class="kw1">else</span>
            currentState <span class="sy0">&lt;=</span> nextState<span class="sy0">;</span>
&nbsp;
    <span class="coMULTI">/* Next-state logic */</span>
    <span class="kw1">always</span> <span class="sy0">@*</span> <span class="kw1">begin</span>
        <span class="coMULTI">/* puteti face "case" atat dupa ascii_in, cat si dupa state,
           depinde de modul cum ati construit diagrama si cum va este
           mai convenabil */</span>
        <span class="kw1">case</span> <span class="br0">(</span>currentState<span class="br0">)</span>
        STATE_CAP<span class="sy0">:</span>
            <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">"<span class="es0">\n</span>"</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_CAP<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">"."</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_DOT<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_DONT<span class="sy0">;</span>
            <span class="kw1">end</span>
&nbsp;
        STATE_DOT<span class="sy0">:</span>
            <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">" "</span> <span class="sy0">||</span> ascii_in <span class="sy0">==</span> <span class="st0">"<span class="es0">\n</span>"</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_CAP<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">"."</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_NEVER<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_DONT<span class="sy0">;</span>
            <span class="kw1">end</span>
&nbsp;
        STATE_DONT<span class="sy0">:</span>
            <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">"."</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_DOT<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">(</span>ascii_in <span class="sy0">==</span> <span class="st0">"<span class="es0">\n</span>"</span><span class="br0">)</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_CAP<span class="sy0">;</span>
            <span class="kw1">end</span> <span class="kw1">else</span> <span class="kw1">begin</span>
                nextState <span class="sy0">=</span> STATE_DONT<span class="sy0">;</span>
            <span class="kw1">end</span>
&nbsp;
        <span class="kw1">endcase</span>
     <span class="kw1">end</span>
&nbsp;
    <span class="coMULTI">/* Output logic */</span>
    <span class="kw1">assign</span> ascii_out <span class="sy0">=</span> <span class="br0">(</span>currentState <span class="sy0">==</span> STATE_CAP <span class="sy0">&amp;&amp;</span>
                        ascii_in <span class="sy0">&gt;=</span> <span class="st0">"a"</span> <span class="sy0">&amp;&amp;</span> ascii_in <span class="sy0">&lt;=</span> <span class="st0">"z"</span><span class="br0">)</span> <span class="sy0">?</span> 
                       ascii_in <span class="sy0">+</span> toUpper <span class="sy0">:</span>
                       ascii_in<span class="sy0">;</span>
<span class="kw1">endmodule</span></pre>

<p>
<strong>3.5.</strong>
Cum spuneam, spre deosebire de un automat Mealy, unul Moore:
</p>
<ul>
<li class="level1"><div class="li"> poate scoate output doar in functie de starea curenta</div>
</li>
<li class="level1"><div class="li"> ca atare, poate scoate output ca functie de un input numai dupa ce tranzitioneaza in starea cauzata de acel input, deci un ciclu de ceas mai tarziu.</div>
</li>
</ul>

<p>
Implicatiile asupra design-ului Moore vor fi:
</p>
<ul>
<li class="level1"><div class="li"> output-ul va fi cu un ciclu de ceas decalat fata de input (si in primul ciclu de ceas, sa zicem ca vom scoate la output, by default, caracterul ”-”)</div>
</li>
<li class="level1"><div class="li"> din prima stare, care va fi ceva de tipul “capitalize <strong>next</strong> letter”: daca la input primesc “a” (sau “A”), trec in starea in care scot la iesire uppercase “A”, etc. O sa presupun de acum incolo ca exista doar litera “a”, desi starile trebuie duplicate pentru toate cele 256 de caractere <abbr title="American Standard Code for Information Interchange">ASCII</abbr>.</div>
</li>
<li class="level1"><div class="li"> din multimea de stari de tipul “uppercase letter” (caci sunt 256) se va trece in multimea de stari de tipul “lowercase letter”, si anume in cea corespunzatoare input-ului curent (practic, a doua litera din text). Clean, rinse, repeat.</div>
</li>
<li class="level1"><div class="li"> Daca input-ul este un punct, trec in starea in care astept un spatiu. Daca am primit un spatiu, trec in starea in care afisez spatiu si ma pregatesc sa capitalizez urmatoarea litera.</div>
</li>
</ul>

<p>
Pe textul de intrare
</p>
<pre class="code">ana are mere. florin are un tanc</pre>

<p>
Automatul se va comporta asa:
</p>
<div class="table sectionedit21"><table class="inline">
	<tbody><tr class="row0">
		<th class="col0 centeralign">  Stare  </th><th class="col1 centeralign">  Output  </th><th class="col2 centeralign">  Input  </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  capitalize_next  </td><td class="col1 centeralign">  ?  </td><td class="col2 centeralign">  'a'  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  uppercase_a  </td><td class="col1 centeralign">  'A'  </td><td class="col2 centeralign">  'n'  </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  lowercase_n  </td><td class="col1 centeralign">  'n'  </td><td class="col2 centeralign">  'a'  </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  …  </td><td class="col1 centeralign">  ..  </td><td class="col2 centeralign">  ..  </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  lowercase_e  </td><td class="col1 centeralign">  'e'  </td><td class="col2 centeralign">  '.'  </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign">  point  </td><td class="col1 centeralign">  '.'  </td><td class="col2 centeralign">  ' '  </td>
	</tr>
	<tr class="row7">
		<td class="col0 centeralign">  point_space  </td><td class="col1 centeralign">  ' '  </td><td class="col2 centeralign">  'f'  </td>
	</tr>
	<tr class="row8">
		<td class="col0 centeralign">  uppercase_f  </td><td class="col1 centeralign">  'F'  </td><td class="col2 centeralign">  'l'  </td>
	</tr>
	<tr class="row9">
		<td class="col0 centeralign">  …  </td><td class="col1 centeralign">  …  </td><td class="col2 centeralign">  …  </td>
	</tr>
</tbody></table></div>

<p>
Iar Moore-ul arata, de principiu, cam asa:<br><a href="http://elf.cs.pub.ro/cn/wiki/_detail/lab/cn2/index2.png?id=lab%3Acn2%3Alab00" class="media" title="lab:cn2:index2.png"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/index2.png" class="media" title="Moore" alt="Moore"></a>.<br>Cu observatia ca starile “UPPER” si “LOWER” sunt de fapt manunchiuri de 256 de stari, si poate mai sunt si altele mai mici.
</p>

</div>

<h2 class="sectionedit22" id="link-uri-utile">5. Link-uri utile</h2>
<div class="level2">

<p>
<a href="http://stackoverflow.com/questions/3569874/how-do-uppercase-and-lowercase-letters-differ-by-only-one-bit" class="urlextern" title="http://stackoverflow.com/questions/3569874/how-do-uppercase-and-lowercase-letters-differ-by-only-one-bit" rel="nofollow">Convert to uppercase</a>.<br><a href="http://stackoverflow.com/questions/9028084/assign-ascii-character-to-wire-in-verilog" class="urlextern" title="http://stackoverflow.com/questions/9028084/assign-ascii-character-to-wire-in-verilog" rel="nofollow">ASCII in Verilog</a>
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>lab/cn2/lab00.txt</bdi> · Last modified: 15.03.2015 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00?do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://elf.cs.pub.ro/cn/wiki/lab/cn2/lab00#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license" class="urlextern">CC Attribution-Noncommercial-Share Alike 3.0 Unported</a></bdi></div>
    <div class="buttons">
        <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/cc-by-nc-sa.png" alt="CC Attribution-Noncommercial-Share Alike 3.0 Unported"></a>        <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/button-donate.gif" width="80" height="15" alt="Donate"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/button-php.gif" width="80" height="15" alt="Powered by PHP"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/button-html5.png" width="80" height="15" alt="Valid HTML5"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/button-css.png" width="80" height="15" alt="Valid CSS"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/button-dw.png" width="80" height="15" alt="Driven by DokuWiki"></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="./Laboratorul 0 - Recapitulare [CN Wiki]_files/indexer.php" width="2" height="1" alt=""></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


</body></html>